<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>How to copy to a user’s clipboard with only JavaScript</title><meta name="description" content="Put your learning hats on, we’re diving into another API that you might not have known existed before today!"><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">How to copy to a user’s clipboard with only JavaScript</h1>
</header>
<section data-field="subtitle" class="p-summary">
Put your learning hats on, we’re diving into another API that you might not have known existed before today!
</section>
<section data-field="body" class="e-content">
<section name="6365" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="27ea" id="27ea" class="graf graf--h3 graf--leading graf--title">How to copy to a user’s clipboard with only JavaScript</h3><p name="30be" id="30be" class="graf graf--p graf-after--h3">Put your learning hats on, we’re diving into another API that you might not have known existed before today!</p><figure name="4bde" id="4bde" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 636px; max-height: 421px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66.2%;"></div><img class="graf-image" data-image-id="1*kHNjCsoI9rHJJoXgbJ15kQ.png" data-width="636" data-height="421" src="https://cdn-images-1.medium.com/max/800/1*kHNjCsoI9rHJJoXgbJ15kQ.png"></div><figcaption class="imageCaption">It will test your head… and your mind… and your brain, too.</figcaption></figure><h3 name="61d0" id="61d0" class="graf graf--h3 graf-after--figure">I need to be honest, this isn’t really one API.</h3><p name="4715" id="4715" class="graf graf--p graf-after--h3 graf--trailing">The clipboard API is made up of multiple API’s. But more than that, we’re going to need to pull in some more Web API’s that don’t directly relate to the clipboard and its utilities in order to completely take full advantage of the browser’s clipboard abilities. By the end you should have several new tools that make it easier to work with text on your websites and apps!</p></div></div></section><section name="165d" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="8e66" id="8e66" class="graf graf--h4 graf--leading"><strong class="markup--strong markup--h4-strong">Starting small: ClipboardEvent</strong></h4><p name="a7ac" id="a7ac" class="graf graf--p graf-after--h4">The clipboard event is the easiest to use, and is technically created through the <a href="https://developer.mozilla.org/en-US/docs/Web/API/ClipboardEvent/ClipboardEvent" data-href="https://developer.mozilla.org/en-US/docs/Web/API/ClipboardEvent/ClipboardEvent" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">real clipboard API</a>, but here’s the dilemma: the clipboard API isn’t exposed in most web browsers. So you can only get to it through event handlers on the <code class="markup--code markup--p-code">copy</code>, <code class="markup--code markup--p-code">cut</code>, and <code class="markup--code markup--p-code">paste</code> events.</p><p name="5eaf" id="5eaf" class="graf graf--p graf-after--p">This means you can modify what is happening during those events. Your code can change both what eventually ends up on the user’s clipboard, and what ends up showing on the screen. However, you can’t create your own event, <a href="http://caniuse.com/#search=clipboardevent" data-href="http://caniuse.com/#search=clipboardevent" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">except in Firefox</a>.</p><p name="6d73" id="6d73" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">So.. What can we even do under these constraints?</strong></p><p name="e7de" id="e7de" class="graf graf--p graf-after--p">As it turns out, plenty!</p><p name="1c87" id="1c87" class="graf graf--p graf-after--p">I can think of a few reasons to modify these events and I’ll give examples below.</p><ul class="postList"><li name="436c" id="436c" class="graf graf--li graf-after--p">Add or remove something from a copied or cut text.</li><li name="b867" id="b867" class="graf graf--li graf-after--li">Obtain the data that was pasted and use it elsewhere in your app.</li></ul><p name="c380" id="c380" class="graf graf--p graf-after--li">That’s not necessarily a <em class="markup--em markup--p-em">lot</em>, but with some extra API juice we can enhance our abilities. More on that later.</p><p name="48b8" id="48b8" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Lets take a look at some examples.</strong></p><figure name="266e" id="266e" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/JustinDFuller/70167eaf10104a2c12778bf77c446b6c.js"></script><figcaption class="imageCaption">This won’t really stop people from copying your text, but it shows how it overrides the initial value.</figcaption></figure><p name="5e69" id="5e69" class="graf graf--p graf-after--figure">In the above example all you have to do is add an eventListener to the copy event. The event that you receive contains <code class="markup--code markup--p-code">clipboardData</code> and its three methods: <code class="markup--code markup--p-code">setData</code>, <code class="markup--code markup--p-code">getData</code>, and <code class="markup--code markup--p-code">clearData</code>.</p><p name="2ba4" id="2ba4" class="graf graf--p graf-after--p">It actually has all methods and properties of the <a href="https://html.spec.whatwg.org/multipage/interaction.html#datatransfer" data-href="https://html.spec.whatwg.org/multipage/interaction.html#datatransfer" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">DataTransfer</a> object. So you can inspect the properties, <code class="markup--code markup--p-code">items</code> and <code class="markup--code markup--p-code">types</code> in case you are not sure what arguments to use for <code class="markup--code markup--p-code">setData</code> or <code class="markup--code markup--p-code">getData</code>.</p><figure name="514a" id="514a" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/JustinDFuller/ebef98aa6dbd0f10350dbf5db62cbce1.js"></script><figcaption class="imageCaption">Don’t let the user paste into the confirmation input, or don’t let them paste their own password.</figcaption></figure><p name="d001" id="d001" class="graf graf--p graf-after--figure">This example shows what it would look like to not allow a user to paste text into an input with the ID of “passwordConfirmation”. It also doesn’t allow them to paste “theUserPassword” into any field (we’re pretending that’s actually their password. Please ignore for a moment that you should never have the user’s password available in plain text in your web app.).</p><p name="e3f2" id="e3f2" class="graf graf--p graf-after--p">Another example could be a profanity filter if you are creating a web app that expects young users.</p><p name="a6f4" id="a6f4" class="graf graf--p graf-after--p graf--trailing">You could go on to use the value retrieved from <code class="markup--code markup--p-code">getData</code> elsewhere in your app. As an example, maybe you need to log when data is pasted, like in a test-taking app. Sometime’s pasting text in that setting could be OK, but you may want to be able to go back later and ensure the pasted content wasn’t copied from elsewhere.</p></div></div></section><section name="813d" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="7cc3" id="7cc3" class="graf graf--h3 graf--leading">Creating your own copy event.</h3><blockquote name="4046" id="4046" class="graf graf--blockquote graf-after--h3">Copying text to the clipboard shouldn’t be hard. It shouldn’t require dozens of steps to configure or hundreds of KBs to load. But most of all, it shouldn’t depend on Flash or any bloated framework. — <a href="https://clipboardjs.com/" data-href="https://clipboardjs.com/" class="markup--anchor markup--blockquote-anchor" title="https://clipboardjs.com/" rel="noopener" target="_blank">clipboardjs.com</a></blockquote><p name="c040" id="c040" class="graf graf--p graf-after--blockquote">Before we get into this, I’d like to introduce you to an open source project that simplifies everything I’m about to show you. It’s called “clipboard.js” and it allows you to easily copy text to your clipboard. You may find it easier than doing this on your own. It’s quite a small library, and has a very simple API.</p><div name="b8ae" id="b8ae" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://clipboardjs.com/" data-href="https://clipboardjs.com/" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://clipboardjs.com/"><strong class="markup--strong markup--mixtapeEmbed-strong">clipboard.js</strong><br><em class="markup--em markup--mixtapeEmbed-em">Copy text to the clipboard shouldn&#39;t be hard. It shouldn&#39;t require dozens of steps to configure or hundreds of KBs to…</em>clipboardjs.com</a><a href="https://clipboardjs.com/" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="d055248c1a45e4414cbd5b69a7e5ff1d" data-thumbnail-img-id="0*nZQEzBEFevF17izL." style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*nZQEzBEFevF17izL.);"></a></div><p name="c682" id="c682" class="graf graf--p graf-after--mixtapeEmbed">But we’re here to learn, so lets look at how you can copy text to the user’s clipboard using only Web APIs.</p><p name="f164" id="f164" class="graf graf--p graf-after--p">Since the <code class="markup--code markup--p-code">ClipboardEvent</code> object isn’t exposed in most browsers, we must go a different route. To accomplish this we’ll need to add to our tools, <code class="markup--code markup--p-code">document.execCommand()</code>. This will allow us to run a <code class="markup--code markup--p-code">copy</code> command that copies that current selection to the keyboard.</p><p name="bc4b" id="bc4b" class="graf graf--p graf-after--p">Here’s an example shown with CodePen:</p><figure name="07f0" id="07f0" class="graf graf--figure graf--iframe graf-after--p"><iframe src="https://codepen.io/Iamjfu/embed/preview/WRGZOg?height=600&amp;amp;slug-hash=WRGZOg&amp;amp;default-tabs=js,result&amp;amp;host=http%3A%2F%2Fcodepen.io&amp;amp;embed-version=2" width="700" height="525" frameborder="0" scrolling="no"></iframe></figure><p name="eb47" id="eb47" class="graf graf--p graf-after--figure">This must be triggered by a user event, like a click. This is a safety feature implemented on important operations, such as opening the file upload window, copying to a clipboard, etc. It helps to keep users safe from websites interacting with their computer when they don’t them want to.</p><p name="29e4" id="29e4" class="graf graf--p graf-after--p">A few notes:</p><ul class="postList"><li name="c0b4" id="c0b4" class="graf graf--li graf-after--p">You can use either an <code class="markup--code markup--li-code">input</code> with the type attribute set to text, or a <code class="markup--code markup--li-code">textarea</code>. With the latter requiring one less line of code in order to create it.</li><li name="d0fe" id="d0fe" class="graf graf--li graf-after--li">You may read that <code class="markup--code markup--li-code">document.execCommand</code> requires <code class="markup--code markup--li-code">designmode</code>, but as far as I can tell this is not true. It just needs to be triggered by a user initiated event.</li><li name="7d84" id="7d84" class="graf graf--li graf-after--li">You probably want to wrap <code class="markup--code markup--li-code">document.execCommand</code> in a try/catch block. In some browsers it will throw an error on failures.</li><li name="5209" id="5209" class="graf graf--li graf-after--li">You can inspect the result of <code class="markup--code markup--li-code">execCommand</code> to see if it worked or not. It returns a Boolean that relates to the success of the command.</li></ul><p name="7c19" id="7c19" class="graf graf--p graf-after--li graf--trailing">And that’s it! You’re now successfully copying text to your clipboard!</p></div></div></section><section name="1da6" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="1ff1" id="1ff1" class="graf graf--p graf--leading">Please feel free to check out some of my other writings on APIs: <a href="https://hackernoon.com/javascript-apis-battery-c72baa74c203#.u4mh0vg6h" data-href="https://hackernoon.com/javascript-apis-battery-c72baa74c203#.u4mh0vg6h" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Battery</a>, <a href="https://hackernoon.com/javascript-apis-console-23ebce270419#.cheoig9tu" data-href="https://hackernoon.com/javascript-apis-console-23ebce270419#.cheoig9tu" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Console</a>, and <a href="https://medium.com/@justindanielfuller/javascript-apis-video-api-db803f9fd1b7#.f1y9dbzuk" data-href="https://medium.com/@justindanielfuller/javascript-apis-video-api-db803f9fd1b7#.f1y9dbzuk" class="markup--anchor markup--p-anchor" target="_blank">Video</a>.</p><p name="821a" id="821a" class="graf graf--p graf-after--p">Also, please stay on the lookout for my upcoming post on the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/designMode" data-href="https://developer.mozilla.org/en-US/docs/Web/API/Document/designMode" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">DesignMode</a> API and how it can be used with <code class="markup--code markup--p-code">execCommand</code> to do some really awesome stuff!</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="3"><figure name="9f38" id="9f38" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 33.333%;"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 50.4%;"></div><a href="http://bit.ly/HackernoonFB" data-href="http://bit.ly/HackernoonFB" class="graf-imageAnchor" data-action="image-link" data-action-observe-only="true"><img class="graf-image" data-image-id="1*0hqOaABQ7XGPT-OYNgiUBg.png" data-width="1136" data-height="572" src="https://cdn-images-1.medium.com/max/400/1*0hqOaABQ7XGPT-OYNgiUBg.png"></a></div></figure><figure name="b494" id="b494" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 50.4%;"></div><a href="https://goo.gl/k7XYbx" data-href="https://goo.gl/k7XYbx" class="graf-imageAnchor" data-action="image-link" data-action-observe-only="true"><img class="graf-image" data-image-id="1*Vgw1jkA6hgnvwzTsfMlnpg.png" data-width="1136" data-height="572" src="https://cdn-images-1.medium.com/max/400/1*Vgw1jkA6hgnvwzTsfMlnpg.png"></a></div></figure><figure name="d0ef" id="d0ef" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 33.333%;"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 50.4%;"></div><a href="https://goo.gl/4ofytp" data-href="https://goo.gl/4ofytp" class="graf-imageAnchor" data-action="image-link" data-action-observe-only="true"><img class="graf-image" data-image-id="1*gKBpq1ruUi0FVK2UM_I4tQ.png" data-width="1136" data-height="572" src="https://cdn-images-1.medium.com/max/400/1*gKBpq1ruUi0FVK2UM_I4tQ.png"></a></div></figure></div><div class="section-inner sectionLayout--insetColumn"><blockquote name="f922" id="f922" class="graf graf--blockquote graf-after--figure"><a href="http://bit.ly/Hackernoon" data-href="http://bit.ly/Hackernoon" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank">Hacker Noon</a> is how hackers start their afternoons. We’re a part of the <a href="http://bit.ly/atAMIatAMI" data-href="http://bit.ly/atAMIatAMI" class="markup--anchor markup--blockquote-anchor" rel="nofollow noopener noopener" target="_blank">@AMI</a> family. We are now <a href="http://bit.ly/hackernoonsubmission" data-href="http://bit.ly/hackernoonsubmission" class="markup--anchor markup--blockquote-anchor" rel="nofollow noopener noopener" target="_blank">accepting submissions</a> and happy to <a href="mailto:partners@amipublications.com" data-href="mailto:partners@amipublications.com" class="markup--anchor markup--blockquote-anchor" target="_blank">discuss advertising &amp; sponsorship</a> opportunities.</blockquote><blockquote name="708a" id="708a" class="graf graf--blockquote graf-after--blockquote">If you enjoyed this story, we recommend reading our <a href="http://bit.ly/hackernoonlatestt" data-href="http://bit.ly/hackernoonlatestt" class="markup--anchor markup--blockquote-anchor" rel="nofollow noopener noopener" target="_blank">latest tech stories</a> and <a href="https://hackernoon.com/trending" data-href="https://hackernoon.com/trending" class="markup--anchor markup--blockquote-anchor" rel="nofollow noopener noopener" target="_blank">trending tech stories</a>. Until next time, don’t take the realities of the world for granted!</blockquote></div><div class="section-inner sectionLayout--fullWidth"><figure name="3936" id="3936" class="graf graf--figure graf--layoutFillWidth graf-after--blockquote graf--trailing"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 12%;"></div><img class="graf-image" data-image-id="1*35tCjoPcvq6LbB3I6Wegqw.jpeg" data-width="15000" data-height="1800" src="https://cdn-images-1.medium.com/max/2000/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"></div></figure></div></div></section>
</section>
<footer><p class="p-tags">Tagged in <a href="https://medium.com/tag/javascript" class="p-tag">JavaScript</a>, <a href="https://medium.com/tag/web-development" class="p-tag">Web Development</a>, <a href="https://medium.com/tag/tech" class="p-tag">Tech</a>, <a href="https://medium.com/tag/technology" class="p-tag">Technology</a>, <a href="https://medium.com/tag/programming" class="p-tag">Programming</a></p><p>By <a href="https://medium.com/@justindanielfuller" class="p-author h-card">Justin Fuller</a> on <a href="https://medium.com/p/12b248d05dd3"><time class="dt-published" datetime="2017-01-16T02:28:32.660Z">January 16, 2017</time></a>.</p><p><a href="https://medium.com/@justindanielfuller/you-need-to-discover-the-awesome-clipboard-web-api-12b248d05dd3" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on April 16, 2018.</p></footer></article>

</body></html>